(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("fs-extra"),require("chalk")):"function"==typeof define&&define.amd?define(["fs-extra","chalk"],b):(a=a||self,a.genfile=b(a.fsExtra,a.chalk))})(this,function(a,b){'use strict';b=b&&b.hasOwnProperty("default")?b["default"]:b;function c(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})}function d(a,b){var e={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]},h,i,j,k;return k={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k;function c(a){return function(b){return d([a,b])}}function d(c){if(h)throw new TypeError("Generator is already executing.");while(e)try{if(h=1,i&&(j=2&c[0]?i["return"]:c[0]?i["throw"]||((j=i["return"])&&j.call(i),0):i.next)&&!(j=j.call(i,c[1])).done)return j;if(i=0,j)c=[2&c[0],j.value];switch(c[0]){case 0:case 1:j=c;break;case 4:e.label++;return{value:c[1],done:!1};case 5:e.label++;i=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(j=e.trys,j=0<j.length&&j[j.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!j||c[1]>j[0]&&c[1]<j[3])){e.label=c[1];break}if(6===c[0]&&e.label<j[1]){e.label=j[1];j=c;break}if(j&&e.label<j[2]){e.label=j[2];e.ops.push(c);break}if(j[2])e.ops.pop();e.trys.pop();continue;}c=b.call(a,e)}catch(a){c=[6,a];i=0}finally{h=j=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var e=console.info,f=b.bold.red,g=b.bold.keyword("orange"),h=b.bold.green,i=b.bold.blue,j=b.bold.magenta,k=function(b,c,d){if("object"==typeof c){return a.outputJSON(b,c,{spaces:2}).then(function(){return e(d)}).catch(function(a){return console.error(f(a))})}else{return a.outputFile(b,c).then(function(){return e(d)}).catch(function(a){return console.error(f(a))})}};return function(b){var f=b.filename,l=b.template,m=b.path,n=void 0===m?"":m,o=b.update,p=n.replace(/(^\/)|(\/$)/g,"");p=p?p+"/"+f:f;return new Promise(function(b){a.pathExists(p,function(a,f){return c(void 0,void 0,void 0,function(){return d(this,function(a){switch(a.label){case 0:if(!!f)return[3,2];return[4,k(p,l,h("[create]")+": "+j(p))];case 1:a.sent();b("create");return[3,5];case 2:if(!o)return[3,4];return[4,k(p,l,i("[update]")+": "+j(p))];case 3:a.sent();b("update");return[3,5];case 4:e(g("[exist]")+": "+j(p));b("exist");a.label=5;case 5:return[2];}})})})})}});
